# ğŸ“Š Shop Bookings Page - Chi Tiáº¿t TÃ­nh NÄƒng

## ğŸ¨ Giao Diá»‡n

### Header
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“… ÄÆ¡n Ä‘áº·t sÃ¢n                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Filter Bar
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Tráº¡ng thÃ¡i thanh toÃ¡n: [â–¼ Táº¥t cáº£ (28)                    ] â”‚
â”‚                        - Chá» thanh toÃ¡n (8)               â”‚
â”‚                        - ÄÃ£ thanh toÃ¡n (20)               â”‚
â”‚                        - Tháº¥t báº¡i (0)                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Table Columns
```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MÃ£   â”‚ SÃ¢n      â”‚ KhÃ¡ch    â”‚ NgÃ y   â”‚ Giá»      â”‚ Tiá»n   â”‚ Thanh toÃ¡n â”‚ Tráº¡ng thÃ¡iâ”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ BK-1 â”‚ SÃ¢n 1    â”‚ VÄƒn A    â”‚20/10/25â”‚14:00-15:00â”‚200,000Ä‘â”‚ âœ… Paid    â”‚ ÄÃºng giá»  â”‚
â”‚ BK-2 â”‚ SÃ¢n 2    â”‚ Háº±ng B   â”‚20/10/25â”‚15:00-16:00â”‚150,000Ä‘â”‚ â³ Pending â”‚ ChÆ°a xÃ¡c nháº­n
â”‚ BK-3 â”‚ SÃ¢n 3    â”‚ PhÃº C    â”‚21/10/25â”‚10:00-11:00â”‚180,000Ä‘â”‚ âœ… Paid    â”‚ ÄÃºng giá»  â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Pagination
```
Hiá»ƒn thá»‹ 1 Ä‘áº¿n 10 trong 28 Ä‘Æ¡n
[â—€] [1] [2] [3] [4] [â–¶]
     â–² (Active page - xanh)
```

## ğŸ¯ TÃ­nh NÄƒng Chi Tiáº¿t

### 1. Status Filter (Dropdown)
**Má»¥c Ä‘Ã­ch**: Lá»c Ä‘Æ¡n Ä‘áº·t theo tráº¡ng thÃ¡i thanh toÃ¡n

**TÃ¹y chá»n**:
- `all` â†’ Táº¥t cáº£ Ä‘Æ¡n Ä‘áº·t
- `pending` â†’ ÄÆ¡n chá» thanh toÃ¡n  
- `paid` â†’ ÄÆ¡n Ä‘Ã£ thanh toÃ¡n
- `failed` â†’ ÄÆ¡n tháº¥t báº¡i

**HÃ nh Ä‘á»™ng**:
- Khi thay Ä‘á»•i filter â†’ Pagination reset vá» trang 1
- Count tá»± Ä‘á»™ng cáº­p nháº­t dá»±a trÃªn dá»¯ liá»‡u thá»±c

**VÃ­ dá»¥**:
```
"Táº¥t cáº£ (28)" â†’ Click "Chá» thanh toÃ¡n"
â†’ Filter = "pending"
â†’ Hiá»ƒn thá»‹ chá»‰ 8 Ä‘Æ¡n pending
â†’ Pagination: [1] (1 trang)
```

### 2. Pagination (10 items/page)

**Cáº¥u trÃºc**:
```
[Previous] [Page Numbers] [Next]
```

**Chi tiáº¿t**:
- Previous button: Disable náº¿u trang = 1
- Next button: Disable náº¿u trang = totalPages
- Page number: Active page highlight xanh
- Info text: "Hiá»ƒn thá»‹ X Ä‘áº¿n Y trong Z Ä‘Æ¡n"

**VÃ­ dá»¥**:
```
Trang 1: Hiá»ƒn thá»‹ 1-10 trong 28
Trang 2: Hiá»ƒn thá»‹ 11-20 trong 28  
Trang 3: Hiá»ƒn thá»‹ 21-28 trong 28
```

### 3. Data Formatting

#### PlayDate â†’ dd/MM/yyyy
```javascript
Input:  "2025-10-20T10:00:00Z"
Output: "20/10/2025"
```

#### Time â†’ HH:mm - HH:mm
```javascript
Input:  start_time="14:00", end_time="15:00"
Output: "14:00 - 15:00"
```

#### Price â†’ VND Format + "Ä‘"
```javascript
Input:  200000
Output: "200,000Ä‘"

Logic: new Intl.NumberFormat("vi-VN").format(200000) + "Ä‘"
```

#### PaymentStatus â†’ Icon + Label
```javascript
"paid"    â†’ "âœ… ÄÃ£ thanh toÃ¡n"
"pending" â†’ "â³ Chá» thanh toÃ¡n"
"failed"  â†’ "âŒ Tháº¥t báº¡i" (hoáº·c capitalize)
```

### 4. Responsive Design

**Desktop** (lg+):
- Table full width
- Sidebar 280px + Content 1fr
- All columns visible

**Tablet** (md):
- Table may scroll horizontally
- Sidebar 280px (collapsed to 84px)
- Pagination vertical or horizontal

**Mobile** (sm):
- Sidebar hidden (button to toggle)
- Table scrolls horizontally
- Pagination buttons stack

## ğŸ”„ Data Flow

```
1. Component Mount
   â†“
2. Fetch Shop + Fields + Bookings (parallel)
   â†“
3. Store in state:
   - bookings: Bookings[]
   - statusFilter: "all"|"pending"|"paid"|"failed"
   - currentPage: number
   â†“
4. useMemo: Filter bookings by statusFilter
   â†“
5. useMemo: Paginate filtered bookings
   â†“
6. Render: Table with paginated data
   â†“
7. User interaction:
   - Change filter â†’ Reset pagination
   - Click page â†’ Update currentPage
   - Change page â†’ Paginated view updates
```

## ğŸ“ State Structure

```typescript
const [shop, setShop] = useState<Shops | null>(null);
const [fields, setFields] = useState<FieldWithImages[]>([]);
const [bookings, setBookings] = useState<Bookings[]>([]);
const [loading, setLoading] = useState(true);
const [statusFilter, setStatusFilter] = useState<"all" | "pending" | "paid" | "failed">("all");
const [currentPage, setCurrentPage] = useState(1);

// Computed values (useMemo)
const filteredBookings = bookings.filter(...)
const paginatedBookings = filteredBookings.slice(...)
const totalPages = Math.ceil(filteredBookings.length / ITEMS_PER_PAGE)
```

## ğŸ¨ Styling Classes

**Wrapper**:
- `.table-wrap`: Table container
- `.space-y-4`: Spacing between sections

**Filter Bar**:
- `.p-4`: Padding
- `.bg-white`: White background
- `.rounded-lg`: Rounded corners
- `.border border-gray-200`: Gray border

**Table**:
- `.table`: Base table styles
- `.border-b`: Row borders
- `.hover:bg-gray-50`: Row hover effect
- `.py-3 px-4`: Cell padding

**Pagination**:
- `.flex items-center gap-2`: Flexbox layout
- `.w-8 h-8`: Button size
- `.rounded-lg`: Rounded buttons
- `.bg-blue-600`: Active page highlight

## ğŸš€ Performance Optimizations

1. **useMemo for Filtering**: Recalculate only when bookings or statusFilter changes
2. **useMemo for Pagination**: Recalculate only when filteredBookings or currentPage changes
3. **Cleanup Function**: Abort requests on unmount
4. **Parallel Loading**: fetchShopFields + fetchMyShopBookings via Promise.all()

## ğŸ” Security

- âœ… Bearer token sent automatically (via axios interceptor)
- âœ… User check: `if (!user?.user_code) return`
- âœ… Type-safe: Full TypeScript support

## ğŸŒ Internationalization

- âœ… Vietnamese labels
- âœ… VND currency format
- âœ… Date format: dd/MM/yyyy (Vietnamese standard)
- âœ… Responsive to locale: `new Intl.NumberFormat("vi-VN")`

---

**Ready for Production** âœ…
